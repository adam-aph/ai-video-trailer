---
status: complete
phase: v2.0-phases-06-through-10
source: 06-01-SUMMARY.md, 07-01-SUMMARY.md, 07-02-SUMMARY.md, 08-01-SUMMARY.md, 08-02-SUMMARY.md, 09-01-SUMMARY.md, 09-02-SUMMARY.md, 09-03-SUMMARY.md, 10-01-SUMMARY.md, 10-02-SUMMARY.md, 10-03-SUMMARY.md
started: 2026-02-28T18:15:00Z
updated: 2026-02-28T18:45:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Full test suite passes
expected: Run `python3 -m pytest tests/ -q` — should show 206 passed, 0 failures
result: pass

### 2. Inference cache module imports and exports correctly
expected: Run `python3 -c "from cinecut.inference.cache import save_cache, load_cache; print('OK')"` — prints OK with no error
result: pass

### 3. TextEngine and get_models_dir import cleanly
expected: Run `python3 -c "from cinecut.inference import TextEngine, get_models_dir, wait_for_vram, MISTRAL_GGUF_NAME; print('OK')"` — prints OK
result: pass

### 4. CINECUT_MODELS_DIR env var overrides model path
expected: Run `CINECUT_MODELS_DIR=/custom/path python3 -c "from cinecut.inference.text_engine import get_models_dir; from pathlib import Path; print(get_models_dir())"` — prints `/custom/path`
result: pass

### 5. cli.py has no hard-coded model paths
expected: Run `grep -n "home/adamh/models" src/cinecut/cli.py` — returns no output (zero matches)
result: pass

### 6. StructuralAnchors in manifest schema
expected: Run `python3 -c "from cinecut.manifest.schema import StructuralAnchors, TrailerManifest; a = StructuralAnchors(begin_t=60.0, escalation_t=540.0, climax_t=4320.0, source='heuristic'); print(a.model_dump())"` — prints dict with begin_t, escalation_t, climax_t, source
result: pass

### 7. NarrativeZone enum has three correct values
expected: Run `python3 -c "from cinecut.manifest.schema import NarrativeZone; print(sorted([z.value for z in NarrativeZone]))"` — prints `['BEGINNING', 'CLIMAX', 'ESCALATION']`
result: pass

### 8. Zone-first clip ordering works
expected: Run `python3 -c "from cinecut.assembly.ordering import sort_clips_by_zone, ZONE_ORDER; from cinecut.manifest.schema import NarrativeZone; print(ZONE_ORDER)"` — prints dict with BEGINNING=0, ESCALATION=1, CLIMAX=2
result: pass

### 9. BPM defaults cover all 18 vibes
expected: Run `python3 -c "from cinecut.assembly.bpm import VIBE_BPM_DEFAULTS; print(len(VIBE_BPM_DEFAULTS), sorted(VIBE_BPM_DEFAULTS.keys()))"` — prints 18 followed by all vibe names
result: pass

### 10. Music fetch returns None without JAMENDO_CLIENT_ID
expected: Run `python3 -c "from cinecut.assembly.music import fetch_music_for_vibe; import os; os.environ.pop('JAMENDO_CLIENT_ID', None); print(fetch_music_for_vibe('action'))"` — prints None (no crash)
result: pass

### 11. SFX synthesis constants are correct
expected: Run `python3 -c "from cinecut.conform.sfx import SFX_HARD_DURATION_S, SFX_BOUNDARY_DURATION_S; print(SFX_HARD_DURATION_S, SFX_BOUNDARY_DURATION_S)"` — prints `0.4 1.2`
result: pass

### 12. VO extraction handles SRT gracefully (no crash)
expected: Run `python3 -c "from cinecut.conform.vo_extract import identify_protagonist; from pathlib import Path; import tempfile, os; f=tempfile.NamedTemporaryFile(suffix='.srt', delete=False); f.write(b'1\n00:00:01,000 --> 00:00:03,000\nHello world\n'); f.close(); print(identify_protagonist(Path(f.name))); os.unlink(f.name)"` — prints None (SRT has no speaker names)
result: pass

### 13. Audio mix uses normalize=0 (never normalize=1)
expected: Run `grep -n "normalize=" src/cinecut/conform/audio_mix.py` — every match shows `normalize=0`, zero matches for `normalize=1`
result: pass

### 14. conform_manifest accepts subtitle_path parameter
expected: Run `python3 -c "import inspect; from cinecut.conform.pipeline import conform_manifest; print('subtitle_path' in inspect.signature(conform_manifest).parameters)"` — prints True
result: pass

## Summary

total: 14
passed: 14
issues: 0
pending: 0
skipped: 0

## Gaps

[none yet]
